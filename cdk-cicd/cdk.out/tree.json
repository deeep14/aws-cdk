{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"CdkCicdStack":{"id":"CdkCicdStack","path":"CdkCicdStack","children":{"myCodePipelineAwsCdk":{"id":"myCodePipelineAwsCdk","path":"CdkCicdStack/myCodePipelineAwsCdk","children":{"Pipeline":{"id":"Pipeline","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline","children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/ArtifactsBucket","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/ArtifactsBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.186.0"}},"Policy":{"id":"Policy","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/ArtifactsBucket/Policy","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/ArtifactsBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},"/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}},"Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.186.0","metadata":[{"bucket":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.186.0","metadata":[{"bucketName":"*","encryptionKey":"*","encryption":"KMS_MANAGED","enforceSSL":true,"blockPublicAccess":"*","removalPolicy":"retain"}]}},"Role":{"id":"Role","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Role","children":{"ImportRole":{"id":"ImportRole","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.186.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkCodeBuildActionRole4108ED91","Arn"]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}]}],"Version":"2012-10-17"},"policyName":"myCodePipelineAwsCdkPipelineRoleDefaultPolicyEBC3D7F2","roles":[{"Ref":"myCodePipelineAwsCdkPipelineRole4380B391"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.186.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.186.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD"}},"name":"cdk-code-pipeline","pipelineType":"V1","restartExecutionOnUpdate":true,"roleArn":{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineRole4380B391","Arn"]},"stages":[{"name":"Source","actions":[{"name":"deeep14_aws-cdk","outputArtifacts":[{"name":"deeep14_aws_cdk_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"ThirdParty","provider":"GitHub"},"configuration":{"Owner":"deeep14","Repo":"aws-cdk","Branch":"cdk-cicd","OAuthToken":"{{resolve:secretsmanager:github-token:SecretString:::}}","PollForSourceChanges":false},"runOrder":1}]},{"name":"Build","actions":[{"name":"myShellStep","inputArtifacts":[{"name":"deeep14_aws_cdk_Source"}],"outputArtifacts":[{"name":"myShellStep_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProject558FDA9D"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"7890ffc80552640e8a713d92611d49b7c07065a525b254ce288086d1a806e49a\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["myCodePipelineAwsCdkCodeBuildActionRole4108ED91","Arn"]}}]},{"name":"UpdatePipeline","actions":[{"name":"SelfMutate","inputArtifacts":[{"name":"myShellStep_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"myCodePipelineAwsCdkUpdatePipelineSelfMutation70AFA96B"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"a06896ecb047b023b56e063806810ef9a061b61c90f8ba151d1c8ef541a2f3dc\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["myCodePipelineAwsCdkCodeBuildActionRole4108ED91","Arn"]}}]},{"name":"TestStage","actions":[{"name":"Prepare","inputArtifacts":[{"name":"myShellStep_Output"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"TestStage-myNewLambdaStack010","Capabilities":"CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND","RoleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-cfn-exec-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]},"ActionMode":"CHANGE_SET_REPLACE","ChangeSetName":"PipelineChange","TemplatePath":"myShellStep_Output::assembly-CdkCicdStack-TestStage/CdkCicdStackTestStagemyNewLambdaStack010BE9819C8.template.json"},"runOrder":1,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}},{"name":"Deploy","actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"TestStage-myNewLambdaStack010","ActionMode":"CHANGE_SET_EXECUTE","ChangeSetName":"PipelineChange"},"runOrder":2,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}}]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.186.0"}},"Source":{"id":"Source","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Source","children":{"deeep14_aws-cdk":{"id":"deeep14_aws-cdk","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Source/deeep14_aws-cdk","children":{"WebhookResource":{"id":"WebhookResource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Source/deeep14_aws-cdk/WebhookResource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Webhook","aws:cdk:cloudformation:props":{"authentication":"GITHUB_HMAC","authenticationConfiguration":{"secretToken":"{{resolve:secretsmanager:github-token:SecretString:::}}"},"filters":[{"jsonPath":"$.ref","matchEquals":"refs/heads/{Branch}"}],"registerWithThirdParty":true,"targetAction":"deeep14_aws-cdk","targetPipeline":{"Ref":"myCodePipelineAwsCdkPipeline85D3213D"},"targetPipelineVersion":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnWebhook","version":"2.186.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Build":{"id":"Build","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build","children":{"myShellStep":{"id":"myShellStep","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep","children":{"CdkBuildProject":{"id":"CdkBuildProject","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject","children":{"Role":{"id":"Role","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Role","children":{"ImportRole":{"id":"ImportRole","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.186.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProject558FDA9D"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProject558FDA9D"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProject558FDA9D"},"-*"]]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProjectRoleDefaultPolicyED0D80DA","roles":[{"Ref":"myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProjectRoleEE9F8166"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.186.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.186.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/Build/myShellStep/CdkBuildProject/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CdkCicdStack/Pipeline/Build/myShellStep","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProjectRoleEE9F8166","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"cd cdk-cicd\",\n        \"npm ci\",\n        \"npx cdk synth\",\n        \"pwd\",\n        \"ls\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"base-directory\": \"cdk-cicd/cdk.out\",\n    \"files\": \"**/*\"\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.186.0","metadata":[{},{},{}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"UpdatePipeline":{"id":"UpdatePipeline","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/UpdatePipeline","children":{"SelfMutate":{"id":"SelfMutate","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/UpdatePipeline/SelfMutate","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"TestStage":{"id":"TestStage","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/TestStage","children":{"Prepare":{"id":"Prepare","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/TestStage/Prepare","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Deploy":{"id":"Deploy","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/TestStage/Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}":{"id":"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*","*","*","*","*"]}},"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}":{"id":"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","children":{"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*","*","*","*","*","*","*","*","*","*"]}},"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}":{"id":"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}":{"id":"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","path":"CdkCicdStack/myCodePipelineAwsCdk/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.186.0","metadata":[{"pipelineName":"*","pipelineType":"V1","crossAccountKeys":false,"crossRegionReplicationBuckets":"*","reuseCrossRegionSupportStacks":"*","restartExecutionOnUpdate":true,"role":"*","enableKeyRotation":"*","artifactBucket":"*"},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]}]}},"CodeBuildActionRole":{"id":"CodeBuildActionRole","path":"CdkCicdStack/myCodePipelineAwsCdk/CodeBuildActionRole","children":{"ImportCodeBuildActionRole":{"id":"ImportCodeBuildActionRole","path":"CdkCicdStack/myCodePipelineAwsCdk/CodeBuildActionRole/ImportCodeBuildActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/CodeBuildActionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineRole4380B391","Arn"]}}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.186.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CdkCicdStack/myCodePipelineAwsCdk/CodeBuildActionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/CodeBuildActionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineBuildmyShellStepCdkBuildProject558FDA9D","Arn"]},{"Fn::GetAtt":["myCodePipelineAwsCdkUpdatePipelineSelfMutation70AFA96B","Arn"]}]}],"Version":"2012-10-17"},"policyName":"myCodePipelineAwsCdkCodeBuildActionRoleDefaultPolicy65CA2265","roles":[{"Ref":"myCodePipelineAwsCdkCodeBuildActionRole4108ED91"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.186.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.186.0","metadata":[{"assumedBy":"*"},{"grantAssumeRole":["*"]},{"grant":["*","*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"grantAssumeRole":["*"]},{"grant":["*","*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"UpdatePipeline":{"id":"UpdatePipeline","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline","children":{"SelfMutation":{"id":"SelfMutation","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation","children":{"Role":{"id":"Role","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Role","children":{"ImportRole":{"id":"ImportRole","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.186.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"myCodePipelineAwsCdkUpdatePipelineSelfMutation70AFA96B"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"myCodePipelineAwsCdkUpdatePipelineSelfMutation70AFA96B"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"myCodePipelineAwsCdkUpdatePipelineSelfMutation70AFA96B"},"-*"]]}},{"Action":"sts:AssumeRole","Condition":{"ForAnyValue:StringEquals":{"iam:ResourceTag/aws-cdk:bootstrap-role":["image-publishing","file-publishing","deploy"]}},"Effect":"Allow","Resource":{"Fn::Join":["",["arn:*:iam::",{"Ref":"AWS::AccountId"},":role/*"]]}},{"Action":["cloudformation:DescribeStacks","s3:ListBucket"],"Effect":"Allow","Resource":"*"},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["myCodePipelineAwsCdkPipelineArtifactsBucket16922BFD","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"myCodePipelineAwsCdkUpdatePipelineSelfMutationRoleDefaultPolicyAABBFE8C","roles":[{"Ref":"myCodePipelineAwsCdkUpdatePipelineSelfMutationRole5B15CB08"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.186.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.186.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"CdkCicdStack/myCodePipelineAwsCdk/UpdatePipeline/SelfMutation/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CdkCicdStack/Pipeline/UpdatePipeline/SelfMutate","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"name":"cdk-code-pipeline-selfupdate","serviceRole":{"Fn::GetAtt":["myCodePipelineAwsCdkUpdatePipelineSelfMutationRole5B15CB08","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g aws-cdk@2\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk -a . deploy CdkCicdStack --require-approval=never --verbose\"\n      ]\n    }\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.186.0","metadata":[{},{},{}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.pipelines.CodePipeline","version":"2.186.0"}},"TestStage":{"id":"TestStage","path":"CdkCicdStack/TestStage","children":{"myNewLambdaStack010":{"id":"myNewLambdaStack010","path":"CdkCicdStack/TestStage/myNewLambdaStack010","children":{"CDKMetadata":{"id":"CDKMetadata","path":"CdkCicdStack/TestStage/myNewLambdaStack010/CDKMetadata","children":{"Default":{"id":"Default","path":"CdkCicdStack/TestStage/myNewLambdaStack010/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.186.0"}},"Condition":{"id":"Condition","path":"CdkCicdStack/TestStage/myNewLambdaStack010/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.186.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CdkCicdStack/TestStage/myNewLambdaStack010/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.186.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CdkCicdStack/TestStage/myNewLambdaStack010/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stage","version":"2.186.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CdkCicdStack/CDKMetadata","children":{"Default":{"id":"Default","path":"CdkCicdStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.186.0"}},"Condition":{"id":"Condition","path":"CdkCicdStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.186.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CdkCicdStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.186.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CdkCicdStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.186.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.186.0"}}}